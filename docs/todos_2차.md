# 블랙잭 1단계: 1차 피드백 TODOS

## 리팩토링 리스트
src/main/java/blackjack/domain/card/Card.java
- [ ] Card를 캐싱하는 객체를 분리 (Card는 카드 자체에 대한 관리만 진행. 객체의 무게 줄이기)

src/main/java/blackjack/domain/GameTable.java
- [ ]  Queue를 꺼내지 말고 그냥 GameTable이 CardDeck을 가지고 있는게 좋아보여요 :)

src/main/java/blackjack/domain/Game.java
- [ ] Game 객체의 역할이 모호하다. 
  생성자에서도 사용자가 보기에 쉽게 이해할 수 없는 String 타입의 무언가를 받아서 Game 이 만들어지고 있네요 (Game이라는 이름도 너무 추상적이구요)
  Game이 명확한 역할로 정의될 수 있는 객체가 아니라면, Controller에서 GameTable, Dealer 등등의 다른 객체들을 생성해도 충분할 것 같아요.

src/main/java/blackjack/domain/gamer/Players.java
- [ ] Players 일급컬렉션은 Player List를 생성자로 받아서 단순하게 생성하는 것이 좋아보입니다.
  `,`으로 String을 분리하고 Player를 생성하는 역할은 외부에서 진행

src/main/java/blackjack/domain/gamer/Dealer.java
- [ ] int 타입을 받아서 진행하니, 어떤 int인지, 또 외부에서 추가로 적절한 int를 넣어줘야만 하겠네요.
  Player를 받으면 어떨까??
  
- [ ] 점수계산 로직을 더 깔끔하게 리팩토링 해보자! (중복조건 제거)

src/test/java/blackjack/DealerTest.java
- [ ] 테스트들도 프로덕션 코드와 동일한 패키지 경로를 가지고 있어야 합니다.
  확인하시고 올바르게 배치

src/test/java/blackjack/CardDeckTest.java 
- [ ] 카트가 아니라 카드...죠? ㅋㅋ
  테스트 클래스 이름도 GameTableTest로 바꿔야겠네요

src/main/java/blackjack/dto/Participants.java
- [ ] View와 관련한 로직이 여전히 섞여있다. names(), finalResult()

## self 리팩토링 리스트
- [ ] 의미있는 모든 원시값 포장
- [ ] 메소드 호출에서 스트림을 제외하고는 `.`은 하나만 찍자

# 재정리
구조가 전체적으로 다시 생각해보면 좋을 것 같아 다시 정리 해봅니다.

## 게임진행
1. 플레이어들의 이름을 입력받는다.
-> View 객체가 필요
-> 이름객체, 플레이어, 플레이어들 객체가 필요할 듯
   
2. 게임이 시작된다. 카드가 셔풀된다.
-> 게임이 시작초기화를 어떻게 해줄 것인가? 컨트롤러에서 해줄 것인지, 도메인에 만들 것인지(Facade가 될까?)
-> 카드라는 객체와 해당 카드가 셔플되어 deck으로 존재해야 한다.
   
3. 게임의 참가자는 딜러와 플레이어들이다.
-> 딜러 객체도 필요
-> 딜러와 플레이어는 게임의 참가자라는 공통점을 가진다.   
   
4. 참가자 모두에게 카드 2장이 배부된다.
-> 참가자는 카드들을 가지고 있어야 한다. Cards 라는 객체가 생기고 그것을 가지고 있다.
-> 카드deck에서는 카드가 소진된다.
   
5. 참가자 전원의 카드 내역을 보여준다.
-> 참가자의 카드내역을 View에게 넘겨주어야 한다. (DTO)
   
6. 플레이어들에게 돌아가며 한명씩 카드를 더 받을 것인지 묻는다. (받을 수 없거나 안 받을 때까지 반복)
-> View와 섞여있는 로직 (플레이어의 카드내역을 전달: DTO)
-> 플레이어 각각이 카드를 더 받을 수 있는 상태인지 알아야 한다. 카드를 받는 상태, 안 받는 상태가 존재함.
   
6-1. 대답 'y' : 카드 합계가 21이하인지 확인
-> 플레이어 각각이 카드 합계를 알아야 한다.
6-2. 대답 'n' : 차례가 종료

7. 딜러의 카드 합계가 16이하이면 1장 배부한다.
-> 딜러도 카드를 받는 상태와 안 받는 상태가 존재함 
-> 카드 합계 계산이 가능해야 함
   
8. 참가자 전원의 카드 내역 및 점수를 공개한다.
-> DTO를 사용하여 참가자 전원의 카드 내역 및 점수정보를 전달
   
9. 참가자 전원의 승패여부를 보여준다.
-> 참가자는 각자 승패여부를 알고 있어야 한다.
-> DTO를 사용하여 해당 정보를 넘긴다.
   
## 승패여부 계산 로직
- 승패여부는 플레이어vs딜러를 비교해서 가려진다.
- 승
  - 공통조건: 이기려면 카드 합계는 21 이하여야 한다.
  - 블랙잭: 카드 합계가 21
  - 블랙잭 아닌 경우: 상대보다 점수가 높은 경우
- 무
  - 점수가 같은 경우
  - 둘다 21이 초과되는 경우
- 패
  - `승`,`무` 이외의 경우

## 공통점과 차이점

### 공통점
- 딜러와 플레이어들은 게임 참가자임
- 처음에 2장의 카드를 받음
- 2번째 턴부터 카드를 받는 조건이 되면 카드를 1장 받음
- 점수 계산 로직
### 차이점 -> 추상화할 부분
- 카드를 받을 수 있는 조건이 다름
- 승패여부 상태(딜러는 몇 승 몇 패 형식, 플레이어는 결과만)


